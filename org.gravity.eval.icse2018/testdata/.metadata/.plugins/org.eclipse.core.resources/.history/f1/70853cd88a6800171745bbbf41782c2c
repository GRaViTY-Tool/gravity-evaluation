/*
 * Package package net.sf.jabref.imports;
 * Created on Jul 12, 2004
 * Author mspiegel
 *
 */
package net.sf.jabref.imports;

import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.JDialog;
import javax.swing.JOptionPane;

/**
 * @author mspiegel
 *
 */
public class BooleanAssign {
    
    boolean value;
    
    /**
	 * @param b
	 */
	public BooleanAssign(boolean b) {
		setValue(b);		
	}

	public void setValue(boolean value) {
        this.value = value;
    }
    
    public boolean getValue() {
        return(value);
    }

	/*
	 * Woe unto those who call this function from anywhere but
	 * makeOverwriteChoice(). You will seriously f*&k things up.
	 */
	private boolean overwriteDialog(String oldValue, String newValue,
	        String fieldName) {
	    boolean retval = false;
	    Object[] possibilities = { "Yes", "Yes to All", "No", "No to All" };
	
	    final JOptionPane optionPane = new JOptionPane(
	            "Do you want to overwrite the value '" + oldValue
	                    + "' \nwith the value '" + newValue + "' \nfor the "
	                    + fieldName + " field?", JOptionPane.QUESTION_MESSAGE,
	            JOptionPane.DEFAULT_OPTION, null, possibilities, "No");
	
	    final JDialog dialog = new JDialog(panel.frame(), "Overwrite Value",
	            true);
	    dialog.setContentPane(optionPane);
	    dialog.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
	
	    optionPane.addPropertyChangeListener(new PropertyChangeListener() {
	        public void propertyChange(PropertyChangeEvent e) {
	            String prop = e.getPropertyName();
	
	            if (dialog.isVisible() && (e.getSource() == optionPane)
	                    && (prop.equals(JOptionPane.VALUE_PROPERTY))) {
	                //If you were going to check something
	                //before closing the window, you'd do
	                //it here.
	                dialog.setVisible(false);
	            }
	        }
	    });
	    dialog.pack();
	    dialog.setVisible(true);
	
	    String userChoice = (String) optionPane.getValue();
	    if (userChoice.equals("Yes to All")) {
	        overwriteAll.setValue(true);
	        retval = true;
	    } else if (userChoice.equals("Yes")) {
	        retval = true;
	    } else if (userChoice.equals("No to All")) {
	        overwriteNone.setValue(true);
	    }
	    return (retval);
	}
}
